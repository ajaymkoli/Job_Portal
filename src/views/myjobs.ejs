<div class="container py-5">
  <h2 class="mb-4 text-white">My Posted Jobs</h2>

  <% if (locals.jobs && locals.jobs.length > 0) { %>
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    <% for (var i = 0; i < jobs.length; i++) { var job = jobs[i]; %>
    <div class="col">
      <div class="card job-card h-100 shadow-sm border-0">
        <div class="card-body d-flex flex-column gap-2">
          <h5 class="company card-title mt-1 fs-4"><%= job.companyname %></h5>
          <h6 class="role card-subtitle mb-2 fs-5">
            <%= job.jobdesignation %>
          </h6>
          <p class="card-text mb-1 location">
            <i class="fa-solid fa-location-dot"></i>
            <span class="fw-bold"><%= job.joblocation %></span>
          </p>
          <p class="card-text mb-1 salary">
            <i class="fa-solid fa-indian-rupee-sign"></i>
            <span class="fw-bold"><%= job.salary %></span>
          </p>
          <p class="card-text flex-grow-1 text-truncate">
            <%= job.jobdescription %>
          </p>

          <div class="d-flex gap-2 mt-3 align-items-center">
            <a href="/jobdetails/<%= job.id %>" class="btn btn-sm btn-warning"
              >View</a
            >
            <a href="/postjob/<%= job.id %>" class="btn btn-sm btn-light"
              >Edit</a
            >
            <form
              method="post"
              action="/deletejob/<%= job.id %>"
              class="m-0"
              data-confirm="Are you sure you want to delete this job?"
            >
              <button type="submit" class="btn btn-sm btn-danger">
                Delete
              </button>
            </form>
            <a
              href="/applicants/<%= job.id %>"
              class="ms-auto btn btn-sm btn-outline-light"
              >Applicants (<%= job.applicants || 0 %>)</a
            >
          </div>
        </div>
      </div>
    </div>
    <% } %>
  </div>

  <% if (typeof totalPages !== 'undefined' && totalPages > 1) { %>
  <nav aria-label="Page navigation" class="mt-4">
    <ul class="pagination justify-content-center">
      <% for (var p = 1; p <= totalPages; p++) { %>
      <li class="page-item <%= (p === (currentPage || 1)) ? 'active' : '' %>">
        <a class="page-link" href="/myjobs?page=<%= p %>"><%= p %></a>
      </li>
      <% } %>
    </ul>
  </nav>
  <% } %> <% } else { %>
  <div class="text-center text-white-50">
    <p>You have not posted any jobs yet.</p>
    <a href="/postjob" class="btn btn-warning">Post your first job</a>
  </div>
  <% } %>
</div>
