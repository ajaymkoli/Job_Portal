<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-12">
      <div class="card job-card p-5 shadow-lg">
        <div class="card-body">
          <h1 class="display-5 fw-bold text-white mb-4 text-center">
            Applicants for <%= job ? job.jobdesignation : 'Job' %>
          </h1>

          <div class="table-responsive">
            <table
              class="table table-dark table-striped table-hover rounded-3 overflow-hidden"
            >
              <thead>
                <tr class="text-warning-custom">
                  <th scope="col">Sr. No.</th>
                  <th scope="col">Name</th>
                  <th scope="col">Email</th>
                  <th scope="col">Contact</th>
                  <th scope="col">Resume</th>
                </tr>
              </thead>
              <tbody>
                <% if (Array.isArray(applicants) && applicants.length > 0) { %>
                <% applicants.forEach(function(app, idx) { %>
                <tr>
                  <th scope="row"><%= idx + 1 %></th>
                  <td><%= app.name %></td>
                  <td><%= app.email %></td>
                  <td><%= app.contact || 'N/A' %></td>
                  <td>
                    <% if (app.resumepath) { %>
                    <a
                      href="/download-resume/<%= app.id %>"
                      class="text-white-50 text-decoration-none"
                      target="_blank"
                      >View Resume</a
                    >
                    <% } else { %>
                    <span class="text-white-50">No resume</span>
                    <% } %>
                  </td>
                </tr>
                <% }); %> <% } else { %>
                <tr>
                  <td colspan="5" class="text-center text-white-50">
                    No applicants have applied for this job yet.
                  </td>
                </tr>
                <% } %>
              </tbody>
            </table>
          </div>
        </div>
        <!-- Applicants pagination -->
        <% if (typeof totalPages !== 'undefined' && totalPages > 1) { %>
        <nav aria-label="Applicants pagination" class="mt-3">
          <ul class="pagination justify-content-center">
            <% for (var p = 1; p <= totalPages; p++) { %>
            <li
              class="page-item <%= (p === (currentPage || 1)) ? 'active' : '' %>"
            >
              <a
                class="page-link"
                href="/applicants/<%= job.id %>?page=<%= p %>"
                ><%= p %></a
              >
            </li>
            <% } %>
          </ul>
        </nav>
        <% } %>
      </div>
    </div>
  </div>
</div>

<style>
  body {
    background-color: #212529;
    color: #f8f9fa;
    font-family: "Inter", sans-serif;
  }
  .card {
    background-color: #2b3035;
    border: none;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  }
  .text-warning-custom {
    color: #ffc107 !important;
  }
  .table {
    --bs-table-bg: #2b3035; /* Table background color */
    --bs-table-striped-bg: #343a40; /* Striped row background */
    --bs-table-hover-bg: #3d444a; /* Hover background */
    --bs-table-color: #f8f9fa; /* Text color */
  }
  .table thead th {
    border-bottom: 2px solid #ffc107; /* Yellow border under header */
  }
</style>
