<div class="joblisting container py-5 px-5">
  <% if (locals.jobs && locals.jobs.length > 0) { %>
  <p class="text-center mb-5">
    Browse through the latest job opportunities in your field.
  </p>

  <!-- If there are any success messages -->
  <% if (locals.successMessage) { %>
  <div class="alert alert-success jobpostedalert" role="alert"><%= successMessage %></div>
  
  <!-- If there are any error messages -->
  <% } %> <% if (locals.errorMessage) { %>
  <div class="alert alert-warning jobposterror" role="alert"><%= errorMessage %></div>
  <% } %>

  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    <% for (var j = 0; j < locals.jobs.length; j++) { var job = locals.jobs[j];%>
    <div class="col">
      <div class="card job-card h-100 shadow-sm border-0">
        <div class="card-body d-flex flex-column gap-2">
          
          <div class="hiring-status d-flex gap-3 align-items-center border-1 p-2 fs-6">
            Actively hiring <i class="fa-solid fa-arrow-trend-up"></i>
          </div>
          
          <h5 class="company card-title mt-1 fs-3"><%= job.companyname %></h5>
          
          <h6 class="role card-subtitle mb-2 fs-4"><%= job.jobdesignation %></h6>
          
          <p class="card-text mb-1 location">
            <i class="fa-solid fa-location-dot"></i>
            <span class="fw-bold"><%= job.joblocation %></span>
          </p>
          
          <p class="card-text mb-1 salary">
            <i class="fa-solid fa-indian-rupee-sign"></i>
            <span class="fw-bold"><%= job.salary %></span>
          </p>
          
          <p class="card-text mt-2 mb-3 skills d-flex flex-wrap gap-2">
            <% var skillsArr = Array.isArray(job.skillsrequired) ? job.skillsrequired : (job.skillsrequired || '').split(','); for (var i = 0; i < skillsArr.length; i++) { %>
              <span><%= skillsArr[i].trim() %></span>
            <% } %>
          </p>
          
          <p class="card-text flex-grow-1"><%= job.jobdescription%> </p>

          <a href="/jobdetails/<%=job.id%>" class="btn btn-warning mt-3 fw-bold details">View Details</a>
        </div>
      </div>
    </div>
    <% } %>
  </div>
  <% } else { %>
  <div class="text-center">
    <img src="images/noJobListed.png" alt="">
  </div>
  <% } %>
</div>